<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M3U8 Finder from iFrame</title>
    <script src="script.js" defer></script>
</head>
<body>
    <h1>M3U8 Finder from iFrame</h1>
    <input type="text" id="iframeUrl" placeholder="Enter iFrame URL here" />
    <button onclick="loadIframe()">Load iFrame</button>
    <button onclick="findM3U8Links()">Find M3U8 Links</button>
    <iframe id="iframeContent" style="width: 600px; height: 400px; border: 1px solid #ccc; display: none;"></iframe>
    <pre id="output"></pre>
</body>
</html>
<script>
function loadIframe() {
    const iframeUrl = document.getElementById('iframeUrl').value.trim();
    const iframe = document.getElementById('iframeContent');
    
    if (!iframeUrl) {
        document.getElementById('output').textContent = 'Please enter an iFrame URL.';
        return;
    }
    
    iframe.src = iframeUrl;
    iframe.style.display = 'block';
}

function findM3U8Links() {
    const iframe = document.getElementById('iframeContent');
    const output = document.getElementById('output');

    if (!iframe.contentDocument) {
        output.textContent = 'iFrame content not available.';
        return;
    }

    try {
        const content = iframe.contentDocument.body.innerHTML;
        const m3u8Links = content.match(/https?:\/\/[^\s"]+\.m3u8/g) || [];
        
        if (m3u8Links.length === 0) {
            output.textContent = 'No M3U8 links found.';
        } else {
            output.textContent = 'M3U8 links found:\n' + m3u8Links.join('\n');
        }
    } catch (error) {
        output.textContent = `Error: ${error.message}`;
    }
}

</script>