<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M3U8 Finder and HLS Player</title>
    <script src="script.js" defer></script>
</head>
<body>
    <h1>M3U8 Finder and HLS Player</h1>
    <iframe id="contentFrame" src="https://serijuaman.xyz/e/RFlqRmJzUzJlaWJUd0hkeDBKTytEQT09	" style="width: 100%; height: 500px;"></iframe>
    <button onclick="findM3U8Links()">Find M3U8 Links</button>
    <pre id="output"></pre>
    <div id="playerContainer"></div>
</body>
</html>
<script>
async function findM3U8Links() {
    const iframe = document.getElementById('contentFrame');
    const output = document.getElementById('output');
    const playerContainer = document.getElementById('playerContainer');

    try {
        // Preuzmite sadržaj iz iframe-a
        const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
        const iframeContent = iframeDocument.body.innerHTML;
        
        // Pronađite M3U8 linkove u sadržaju iframe-a
        const m3u8Links = iframeContent.match(/https?:\/\/[^\s"]+\.m3u8/g) || [];

        if (m3u8Links.length === 0) {
            output.textContent = 'No M3U8 links found.';
            playerContainer.innerHTML = '';
        } else {
            output.textContent = 'M3U8 links found:\n' + m3u8Links.join('\n');
            
            // Prikaz HLS player-a za prvi pronađeni M3U8 link
            const m3u8Link = m3u8Links[0];
            playerContainer.innerHTML = `
                <video id="videoPlayer" width="640" height="360" controls>
                    <source src="${m3u8Link}" type="application/x-mpegURL">
                    Your browser does not support the video tag.
                </video>
            `;
        }
    } catch (error) {
        output.textContent = `Error: ${error.message}`;
    }
}

</script>
