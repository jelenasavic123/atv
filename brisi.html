<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find M3U8 URLs</title>
    <script type="text/javascript">
        function findM3U8Urls() {
            var m3u8Urls = [];
            var content = document.documentElement.innerHTML;

            // Pronađi M3U8 URL-ove u sadržaju stranice
            var matches = content.match(/https?:\/\/[^"'\s]+\.m3u8/g);
            if (matches) {
                m3u8Urls.push.apply(m3u8Urls, matches);
            }

            // Prikaz URL-ova pomoću Android interfejsa
            if (m3u8Urls.length > 0) {
                Android.showToast('Found M3U8 URLs: ' + m3u8Urls.join(', '));
            } else {
                Android.showToast('No M3U8 URLs found.');
            }
        }

        // Praćenje promena u DOM-u
        function observeForM3U8() {
            var targetNode = document.body;
            var config = { childList: true, subtree: true };

            var callback = function(mutationsList, observer) {
                for (var mutation of mutationsList) {
                    if (mutation.type === 'childList') {
                        findM3U8Urls();
                    }
                }
            };

            var observer = new MutationObserver(callback);
            observer.observe(targetNode, config);
        }

        // Pozovite funkcije nakon učitavanja stranice
        window.onload = function() {
            observeForM3U8();
            findM3U8Urls(); // Proverite odmah po učitavanju stranice
        };
    </script>
</head>
<body>
    <!-- Primer sadržaja stranice -->
    <script type="text/javascript">
        console.log('Simulacija skripte sa M3U8 URL-om');
        var exampleUrl = 'https://filemoon.in/e/jfss5fm21b66/Gunesine_Cerke_-_33_epizoda_HD';
    </script>

    <!-- Dodatni sadržaji i skripte -->
    <script type="text/javascript">
        var anotherUrl = 'https://filemoon.in/e/jfss5fm21b66/Gunesine_Cerke_-_33_epizoda_HD';
    </script>
</body>
</html>
